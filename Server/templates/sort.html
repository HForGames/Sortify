<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Loading</title>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.0/socket.io.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {

            var socket = io.connect('http://127.0.0.1:5000', {transports: ['websocket', 'polling', 'flashsocket']});

            socket.on('connect', function () {
                socket.send('User has connected!');
            });
            socket.on('start', function (info) {
                if (info['playlist_id'] == '{{playlist_id}}' && info['id'] == '{{id}}') {
                    $("#max").text(info['max']);
                }
            });
            socket.on('finish', function () {
                window.location.replace("http://127.0.0.1:5000/create/{{playlist_id}}")
            });
            socket.on('update', function (info) {
                if (info['playlist_id'] == '{{playlist_id}}' && info['id'] == '{{id}}') {
                    $("#actual").text((Number($("#actual").text()) + 1).toString());
                }
            });
        });
    </script>
</head>
<body>
    <p><span id="actual">0</span>/<span id="max"></span></p>
    <p><span id="actual" + 1>0</span></p>
</body>
</html>